<%= form_with(model: @user, local: true, url:update_user_profile_path) do |f| %>
  <div class="mt-4 flex flex-col max-w-md space-y-2 px-4 py-3 border rounded-md shadow-md/50">
    <div>
      <%= f.label :name, class: "block text-sm font-semibold text-gray-700" %>
      <div class="mt-1">
        <%= f.text_field :name,
                          class: "mt-1 border shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full 
                                  border-gray-300 rounded-md pl-2" %>
      </div>
    </div>
  
    <div>
      <%= f.label :email, class: "block text-sm font-semibold text-gray-700" %>
      <div class="mt-1">
        <%= f.email_field :email, label: false, 
                          class: "mt-1 border shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full 
                                  border-gray-300 rounded-md pl-2" %>
      </div>
    </div>

    <%# Allow profile image attachment %>
    <div>
      <%= f.label "Profile image:", multiple: false, class: "block text-sm font-semibold text-gray-700" %>
      <% if @user.profile_image.attached? %>
        <div class="mt-2">

          <%= image_tag( 
                        @user.profile_image.representable? ?
                        @user.profile_image.variant(resize_to_limit: [200,200]).processed :
                        @user.profile_image,
                        class: "ml-4 border rounded-lg shadow-md"
                      ) %>

        </div>
      <% end %>

      <%= f.file_field :profile_image, multiple: false,
                        class: "mt-2 block border rounded-md w-full text-sm text-gray-500
                                file:mr-4 file:py-1 file:px-4
                                file:rounded-md file:border-1
                                file:text-sm file:font-semibold
                                file:bg-indigo-100 file:text-indigo-700
                                hover:file:bg-indigo-50" %>

    </div>

  </div>

  <div class="mt-4 flex justify-left">
    <%= f.submit "Save Changes", 
                 class: "button button-sm bg-blue-500 text-yellow-400 
                         hover:scale-110 hover:invert
                         rounded-md px-4 py-2 shadow-md" %>
  </div>
<% end %>