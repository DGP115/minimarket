<turbo-frame id="categorytree_productlist_toggle">
  <div class="mt-2">
<%#  Display breadcrumbs of teh category hierarchy for teh current product_category %>
    <% @product_category.ancestors.each do |ancestor| %>
      <%= link_to ancestor.name, product_category_path(ancestor), class: "hover:underline text-blue-600" %> 
      <span class="mx-1"> â€º </span>
    <% end %>
  </div>

  <div class="mt-2">
    <%= link_to @product_category.name, 
                tree_left_product_category_path(@product_category), 
                class: "ml-10 text-lg font-semibold" %>
  </div>
  
  <%# Render the sub-categories in a grid layout %>
  <ul class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-2
              text-sm font-medium text-gray-800">
    <%# Pass instance variable to partial as a local. %>
    <%# Because recursion is used within the partial to display sub-categories, %>
    <%# the partial loops through a local variable, which is resets during the hierarchical recursion. %>
    <%# Otherwise an endless loop results because @product_categories doesn't change  %>
    <% if @product_categories.any? %>
      <%= render partial: "product_categories/product_category", 
                 locals: { product_categories: @product_categories } %>
    <% end %>
  </ul>

  <% if @products.any? %>
    <%= render partial: "products/index", locals: { products: @products, product_category: @product_category } %>
  <% end %>
</turbo-frame>


